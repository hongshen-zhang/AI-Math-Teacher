import{_ as k,r as n,o as p,e as b,w as o,a as e,s as y,b as m,k as D,c as g,l as F,F as T,d as B,n as L,m as Q,q as U,t as O}from"./index-8a54ecfc.js";const z={props:{isShow:{type:Boolean,default:!1},title:{type:String,default:""},data:{type:Object,default:()=>{}}},data(){return{form:{question:"",answer:"",knowledge:""},width:"500px"}},watch:{isShow(l){l&&this.data&&(this.id=this.data.id,this.form=Object.assign(this.form,this.data))}},methods:{onsubmit(){this.id?this.$axios.post("/api/questionLibrary/update",this.form).then(l=>{this.$message.success("修改成功"),this.beforeClose(!0)}):this.$axios.post("/api/questionLibrary/add",this.form).then(l=>{this.$message.success("更新成功"),this.beforeClose(!0)})},beforeClose(l){this.form={question:"",answer:"",knowledge:""},this.$emit("onClose",l)}}};function A(l,s,_,x,t,i){const f=n("el-input"),r=n("el-form-item"),d=n("el-button"),h=n("el-form"),w=n("el-dialog");return p(),b(w,{"model-value":_.isShow,title:_.title,width:"600","before-close":()=>i.beforeClose()},{default:o(()=>[e(h,{model:t.form,"label-width":"120px"},{default:o(()=>[e(r,{label:"题目：",prop:"question",style:y({width:t.width})},{default:o(()=>[e(f,{type:"textarea",rows:"5",modelValue:t.form.question,"onUpdate:modelValue":s[0]||(s[0]=u=>t.form.question=u)},null,8,["modelValue"])]),_:1},8,["style"]),e(r,{label:"答案：",prop:"answer",style:y({width:t.width})},{default:o(()=>[e(f,{type:"textarea",rows:"5",modelValue:t.form.answer,"onUpdate:modelValue":s[1]||(s[1]=u=>t.form.answer=u)},null,8,["modelValue"])]),_:1},8,["style"]),e(r,{label:"知识点：",prop:"knowledge",style:y({width:t.width})},{default:o(()=>[e(f,{type:"textarea",rows:"5",modelValue:t.form.knowledge,"onUpdate:modelValue":s[2]||(s[2]=u=>t.form.knowledge=u)},null,8,["modelValue"])]),_:1},8,["style"]),e(r,null,{default:o(()=>[e(d,{type:"primary",onClick:i.onsubmit},{default:o(()=>[m("提交")]),_:1},8,["onClick"]),e(d,{type:"primary",onClick:i.beforeClose},{default:o(()=>[m("取消")]),_:1},8,["onClick"])]),_:1})]),_:1},8,["model"])]),_:1},8,["model-value","title","before-close"])}const E=k(z,[["render",A]]);const j={components:{FormDialog:E},data(){return{columns:[{prop:"question",label:"题目",type:"textarea"},{prop:"answer",label:"答案",type:"textarea"},{prop:"knowledge",label:"知识点",type:"textarea"},{prop:"operations",label:"操作"}],filter:{question:"",knowledge:""},questions:[],loading:!1,isShowForm:!1,formTitle:"",checkedData:{}}},created(){this.loadQuestions()},methods:{loadQuestions(){this.loading=!0;let l={};this.filter.question&&this.filter.question!==""&&(l.question=this.filter.question),this.filter.knowledge&&this.filter.knowledge!==""&&(l.knowledge=this.filter.knowledge),this.$axios.get("/api/questionLibrary/findAll",{params:l}).then(s=>{this.questions=s.data}).finally(()=>{this.loading=!1})},handleAdd(){this.formTitle="新增",this.isShowForm=!0},onFormClose(l){this.isShowForm=!1,l&&(this.checkedData={},this.loadQuestions())},handleEdit(l){this.formTitle="编辑",this.checkedData=l,this.isShowForm=!0},handleDelete(l){this.$confirm("确认删除？",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{this.$axios.post(`/api/questionLibrary/delete?id=${l}`).then(s=>{this.$message.success("删除成功"),this.loadQuestions()})})}}},N={class:"container"};function P(l,s,_,x,t,i){const f=n("el-input"),r=n("el-form-item"),d=n("el-button"),h=n("el-form"),w=n("el-text"),u=n("el-scrollbar"),C=n("el-table-column"),q=n("el-table"),V=n("form-dialog"),S=D("loading");return p(),g("div",N,[e(h,{class:"header-bar",inline:!0},{default:o(()=>[e(r,{label:"题目："},{default:o(()=>[e(f,{modelValue:t.filter.question,"onUpdate:modelValue":s[0]||(s[0]=a=>t.filter.question=a)},null,8,["modelValue"])]),_:1}),e(r,{label:"知识点："},{default:o(()=>[e(f,{modelValue:t.filter.knowledge,"onUpdate:modelValue":s[1]||(s[1]=a=>t.filter.knowledge=a)},null,8,["modelValue"])]),_:1}),e(r,null,{default:o(()=>[e(d,{type:"primary",onClick:i.loadQuestions},{default:o(()=>[m("查询")]),_:1},8,["onClick"]),e(d,{type:"primary",onClick:i.handleAdd},{default:o(()=>[m("新增")]),_:1},8,["onClick"])]),_:1})]),_:1}),F((p(),b(q,{data:t.questions,style:{width:"100%"},border:!0,size:"large",class:"main-table","empty-text":"无数据"},{default:o(()=>[(p(!0),g(T,null,B(t.columns,a=>(p(),b(C,L(Q({key:a.prop},a)),U({_:2},[a.prop==="operations"?{name:"default",fn:o(c=>[e(d,{type:"primary",onClick:v=>i.handleEdit(c.row)},{default:o(()=>[m("编辑")]),_:2},1032,["onClick"]),e(d,{type:"danger",onClick:v=>i.handleDelete(c.row.id)},{default:o(()=>[m("删除")]),_:2},1032,["onClick"])]),key:"0"}:a.type==="textarea"?{name:"default",fn:o(c=>[e(u,{"max-height":"200px"},{default:o(()=>[e(w,{style:{"white-space":"pre-wrap","word-break":"break-all"}},{default:o(()=>[m(O(c.row[a.prop]),1)]),_:2},1024)]),_:2},1024)]),key:"1"}:void 0]),1040))),128))]),_:1},8,["data"])),[[S,t.loading]]),e(V,{isShow:t.isShowForm,title:t.formTitle,data:t.checkedData,onOnClose:i.onFormClose},null,8,["isShow","title","data","onOnClose"])])}const G=k(j,[["render",P],["__scopeId","data-v-fd1f8c33"]]);export{G as default};
