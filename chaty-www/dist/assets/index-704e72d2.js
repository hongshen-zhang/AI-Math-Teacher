import{_ as k,r as l,o as c,e as y,w as e,a as t,s as b,b as d,k as z,c as w,l as B,F as E,d as F,n as O,m as U,q as A,t as N}from"./index-8a54ecfc.js";const P={data(){return{form:{},width:"500px",isShow:!1,title:"",id:""}},methods:{show(n){this.form={name:"",content:""},this.id="",n?(this.form=Object.assign(this.form,n),this.id=n.id,this.title="编辑"):this.title="新增",this.isShow=!0},onsubmit(){this.id?this.$axios.post("/api/knowledge/update",this.form).then(n=>{this.$message.success("更新成功"),this.beforeClose()}):this.$axios.post("/api/knowledge/add",this.form).then(n=>{this.$message.success("新增成功"),this.beforeClose()})},beforeClose(){this.isShow=!1,this.$emit("onClose")}}};function j(n,s,g,x,o,a){const f=l("el-input"),m=l("el-form-item"),r=l("el-button"),u=l("el-form"),h=l("el-dialog");return c(),y(h,{"model-value":o.isShow,title:o.title,width:"600","before-close":()=>a.beforeClose()},{default:e(()=>[t(u,{model:o.form,"label-width":"120px"},{default:e(()=>[t(m,{label:"名称：",prop:"name",style:b({width:o.width})},{default:e(()=>[t(f,{modelValue:o.form.name,"onUpdate:modelValue":s[0]||(s[0]=_=>o.form.name=_)},null,8,["modelValue"])]),_:1},8,["style"]),t(m,{label:"知识点：",prop:"content",style:b({width:o.width})},{default:e(()=>[t(f,{type:"textarea",rows:"5",modelValue:o.form.content,"onUpdate:modelValue":s[1]||(s[1]=_=>o.form.content=_)},null,8,["modelValue"])]),_:1},8,["style"]),t(m,null,{default:e(()=>[t(r,{type:"primary",onClick:a.onsubmit},{default:e(()=>[d("提交")]),_:1},8,["onClick"]),t(r,{type:"primary",onClick:a.beforeClose},{default:e(()=>[d("取消")]),_:1},8,["onClick"])]),_:1})]),_:1},8,["model"])]),_:1},8,["model-value","title","before-close"])}const q=k(P,[["render",j]]);const I={components:{FormDialog:q},data(){return{columns:[{prop:"name",label:"名称"},{prop:"content",label:"知识点",type:"textarea"},{prop:"operations",label:"操作"}],filter:{keyword:""},tableData:[],loading:!1}},created(){this.loadData()},methods:{loadData(){this.loading=!0;let n={};this.filter.keyword&&this.filter.keyword!==""&&(n.keyword=this.filter.keyword),this.$axios.get("/api/knowledge/list",{params:n}).then(s=>{this.tableData=s.data}).finally(()=>this.loading=!1)},handleAdd(){this.$refs.formDialog.show()},handleEdit(n){this.$refs.formDialog.show(n)},handleDelete(n){}}},L={class:"container"};function T(n,s,g,x,o,a){const f=l("el-input"),m=l("el-form-item"),r=l("el-button"),u=l("el-form"),h=l("el-text"),_=l("el-scrollbar"),C=l("el-table-column"),D=l("el-table"),v=l("form-dialog"),V=z("loading");return c(),w("div",L,[t(u,{class:"header-bar",inline:!0},{default:e(()=>[t(m,null,{default:e(()=>[t(f,{modelValue:o.filter.keyword,"onUpdate:modelValue":s[0]||(s[0]=i=>o.filter.keyword=i),placeholder:"请输入关键字搜索"},null,8,["modelValue"])]),_:1}),t(m,null,{default:e(()=>[t(r,{type:"primary",onClick:a.loadData},{default:e(()=>[d("查询")]),_:1},8,["onClick"]),t(r,{type:"primary",onClick:a.handleAdd},{default:e(()=>[d("新增")]),_:1},8,["onClick"])]),_:1})]),_:1}),B((c(),y(D,{data:o.tableData,style:{width:"100%","user-select":"text"},border:!0,size:"large",class:"main-table","empty-text":"无数据"},{default:e(()=>[(c(!0),w(E,null,F(o.columns,i=>(c(),y(C,O(U({key:i.prop},i)),A({_:2},[i.prop==="operations"?{name:"default",fn:e(p=>[t(r,{type:"primary",onClick:S=>a.handleEdit(p.row)},{default:e(()=>[d("编辑")]),_:2},1032,["onClick"]),t(r,{type:"danger",onClick:S=>a.handleDelete(p.row.id)},{default:e(()=>[d("删除")]),_:2},1032,["onClick"])]),key:"0"}:i.type==="textarea"?{name:"default",fn:e(p=>[t(_,{"max-height":"200px"},{default:e(()=>[t(h,{style:{"white-space":"pre-wrap","word-break":"break-all"}},{default:e(()=>[d(N(p.row[i.prop]),1)]),_:2},1024)]),_:2},1024)]),key:"1"}:void 0]),1040))),128))]),_:1},8,["data"])),[[V,o.loading]]),t(v,{ref:"formDialog",onOnClose:a.loadData},null,8,["onOnClose"])])}const H=k(I,[["render",T],["__scopeId","data-v-142c7f8a"]]);export{H as default};
