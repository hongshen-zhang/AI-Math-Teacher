import{_ as z,r as i,o as w,e as g,w as l,a as t,s as d,b as p,k as D,c as k,l as F,F as R,d as B,n as O,m as E,q as j,t as v}from"./index-8a54ecfc.js";const N={props:{isShow:{type:Boolean,default:!1},title:{type:String,default:""},data:{type:Object,default:()=>{}}},data(){return{form:{name:"",question:"",correctAnswer:"",knowledge:"",answer:"",isTrue:null,errText:"",comment:""},width:"500px",inputAutoSize:{minRows:2,maxRows:5}}},watch:{isShow(r){r&&this.data&&(this.id=this.data.id,this.form=Object.assign(this.form,this.data))}},methods:{onsubmit(){this.id?this.$axios.post("/api/review/update",this.form).then(r=>{this.$message.success("修改成功"),this.beforeClose(!0)}):this.$axios.post("/api/review/add",this.form).then(r=>{this.$message.success("更新成功"),this.beforeClose(!0)})},beforeClose(r){this.form={name:"",question:"",correctAnswer:"",knowledge:"",answer:"",isTrue:null,errText:"",comment:""},this.$emit("onClose",r)}}};function P(r,o,h,C,e,m){const u=i("el-input"),a=i("el-form-item"),c=i("el-option"),y=i("el-select"),f=i("el-button"),b=i("el-form"),x=i("el-scrollbar"),V=i("el-dialog");return w(),g(V,{"model-value":h.isShow,title:h.title,width:"600","before-close":()=>m.beforeClose()},{default:l(()=>[t(x,{"max-height":"600px"},{default:l(()=>[t(b,{model:e.form,"label-width":"120px"},{default:l(()=>[t(a,{label:"名称：",prop:"name",style:d({width:e.width})},{default:l(()=>[t(u,{autosize:e.inputAutoSize,modelValue:e.form.name,"onUpdate:modelValue":o[0]||(o[0]=s=>e.form.name=s)},null,8,["autosize","modelValue"])]),_:1},8,["style"]),t(a,{label:"题目：",prop:"question",style:d({width:e.width})},{default:l(()=>[t(u,{type:"textarea",autosize:e.inputAutoSize,modelValue:e.form.question,"onUpdate:modelValue":o[1]||(o[1]=s=>e.form.question=s)},null,8,["autosize","modelValue"])]),_:1},8,["style"]),t(a,{label:"正确答案：",prop:"correctAnswer",style:d({width:e.width})},{default:l(()=>[t(u,{type:"textarea",autosize:e.inputAutoSize,modelValue:e.form.correctAnswer,"onUpdate:modelValue":o[2]||(o[2]=s=>e.form.correctAnswer=s)},null,8,["autosize","modelValue"])]),_:1},8,["style"]),t(a,{label:"知识点：",prop:"knowledge",style:d({width:e.width})},{default:l(()=>[t(u,{type:"textarea",autosize:e.inputAutoSize,modelValue:e.form.knowledge,"onUpdate:modelValue":o[3]||(o[3]=s=>e.form.knowledge=s)},null,8,["autosize","modelValue"])]),_:1},8,["style"]),t(a,{label:"答案：",prop:"answer",style:d({width:e.width})},{default:l(()=>[t(u,{type:"textarea",autosize:e.inputAutoSize,modelValue:e.form.answer,"onUpdate:modelValue":o[4]||(o[4]=s=>e.form.answer=s)},null,8,["autosize","modelValue"])]),_:1},8,["style"]),t(a,{label:"是否正确：",prop:"isTrue",style:d({width:e.width})},{default:l(()=>[t(y,{modelValue:e.form.isTrue,"onUpdate:modelValue":o[5]||(o[5]=s=>e.form.isTrue=s),style:d({width:e.width}),placeholder:" ",clearable:""},{default:l(()=>[t(c,{label:"正确",value:1}),t(c,{label:"错误",value:0})]),_:1},8,["modelValue","style"])]),_:1},8,["style"]),t(a,{label:"错误：",prop:"errText",style:d({width:e.width})},{default:l(()=>[t(u,{type:"textarea",autosize:e.inputAutoSize,modelValue:e.form.errText,"onUpdate:modelValue":o[6]||(o[6]=s=>e.form.errText=s)},null,8,["autosize","modelValue"])]),_:1},8,["style"]),t(a,{label:"评价：",prop:"comment",style:d({width:e.width})},{default:l(()=>[t(u,{type:"textarea",autosize:e.inputAutoSize,modelValue:e.form.comment,"onUpdate:modelValue":o[7]||(o[7]=s=>e.form.comment=s)},null,8,["autosize","modelValue"])]),_:1},8,["style"]),t(a,null,{default:l(()=>[t(f,{type:"primary",onClick:m.onsubmit},{default:l(()=>[p("提交")]),_:1},8,["onClick"]),t(f,{type:"primary",onClick:m.beforeClose},{default:l(()=>[p("取消")]),_:1},8,["onClick"])]),_:1})]),_:1},8,["model"])]),_:1})]),_:1},8,["model-value","title","before-close"])}const I=z(N,[["render",P]]);const L={components:{FormDialog:I},data(){return{columns:[{prop:"name",label:"名称"},{prop:"question",label:"题目",type:"textarea"},{prop:"correctAnswer",label:"正确答案",type:"textarea"},{prop:"knowledge",label:"知识点",type:"textarea"},{prop:"answer",label:"答案",type:"textarea"},{prop:"isTrue",label:"是否正确",type:"dic",dic:{0:"错误",1:"正确"},align:"center",width:"90px"},{prop:"errText",label:"错误",type:"textarea"},{prop:"comment",label:"评价",type:"textarea"},{prop:"operations",label:"操作",width:"170px"}],filter:{question:"",answer:"",isTrue:null,name:""},reviews:[],loading:!1,isShowForm:!1,formTitle:"",checkedData:{}}},created(){this.loadReviews()},methods:{loadReviews(){this.loading=!0;let r={name:this.filter.name,question:this.filter.question,answer:this.filter.answer,isTrue:this.filter.isTrue};this.$axios.get("/api/review/list",{params:r}).then(o=>{this.reviews=o.data}).finally(()=>{this.loading=!1})},handleAdd(){this.formTitle="新增",this.isShowForm=!0},onFormClose(r){this.isShowForm=!1,r&&(this.checkedData={},this.loadReviews())},handleEdit(r){this.formTitle="编辑",this.checkedData=r,this.isShowForm=!0},handleDelete(r){this.$confirm("确认删除？",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{this.$axios.post(`/api/review/delete?id=${r}`).then(o=>{this.$message.success("删除成功"),this.loadReviews()})})}}},G={class:"container"};function H(r,o,h,C,e,m){const u=i("el-input"),a=i("el-form-item"),c=i("el-option"),y=i("el-select"),f=i("el-button"),b=i("el-form"),x=i("el-text"),V=i("el-scrollbar"),s=i("el-tag"),T=i("el-table-column"),S=i("el-table"),A=i("form-dialog"),q=D("loading");return w(),k("div",G,[t(b,{class:"header-bar",inline:!0,"label-width":"100px"},{default:l(()=>[t(a,{label:"名称："},{default:l(()=>[t(u,{modelValue:e.filter.name,"onUpdate:modelValue":o[0]||(o[0]=n=>e.filter.name=n)},null,8,["modelValue"])]),_:1}),t(a,{label:"题目："},{default:l(()=>[t(u,{modelValue:e.filter.question,"onUpdate:modelValue":o[1]||(o[1]=n=>e.filter.question=n)},null,8,["modelValue"])]),_:1}),t(a,{label:"答案："},{default:l(()=>[t(u,{modelValue:e.filter.answer,"onUpdate:modelValue":o[2]||(o[2]=n=>e.filter.answer=n)},null,8,["modelValue"])]),_:1}),t(a,{label:"是否正确："},{default:l(()=>[t(y,{style:{width:"196.4px"},modelValue:e.filter.isTrue,"onUpdate:modelValue":o[3]||(o[3]=n=>e.filter.isTrue=n),placeholder:" ",clearable:""},{default:l(()=>[t(c,{value:"0",label:"错误"}),t(c,{value:"1",label:"正确"})]),_:1},8,["modelValue"])]),_:1}),t(a,null,{default:l(()=>[t(f,{type:"primary",onClick:m.loadReviews},{default:l(()=>[p("查询")]),_:1},8,["onClick"]),t(f,{type:"primary",onClick:m.handleAdd},{default:l(()=>[p("新增")]),_:1},8,["onClick"])]),_:1})]),_:1}),F((w(),g(S,{data:e.reviews,style:{width:"100%"},border:!0,size:"large",class:"main-table","empty-text":"无数据"},{default:l(()=>[(w(!0),k(R,null,B(e.columns,n=>(w(),g(T,O(E({key:n.prop},n)),j({_:2},[n.prop==="operations"?{name:"default",fn:l(_=>[t(f,{type:"primary",onClick:U=>m.handleEdit(_.row)},{default:l(()=>[p("编辑")]),_:2},1032,["onClick"]),t(f,{type:"danger",onClick:U=>m.handleDelete(_.row.id)},{default:l(()=>[p("删除")]),_:2},1032,["onClick"])]),key:"0"}:n.type==="textarea"?{name:"default",fn:l(_=>[t(V,{"max-height":"200px"},{default:l(()=>[t(x,{style:{"white-space":"pre-wrap","word-break":"break-all"}},{default:l(()=>[p(v(_.row[n.prop]),1)]),_:2},1024)]),_:2},1024)]),key:"1"}:n.type==="dic"?{name:"default",fn:l(_=>[t(s,null,{default:l(()=>[p(v(n.dic[_.row[n.prop]]),1)]),_:2},1024)]),key:"2"}:void 0]),1040))),128))]),_:1},8,["data"])),[[q,e.loading]]),t(A,{isShow:e.isShowForm,title:e.formTitle,data:e.checkedData,onOnClose:m.onFormClose},null,8,["isShow","title","data","onOnClose"])])}const K=z(L,[["render",H],["__scopeId","data-v-205d3e90"]]);export{K as default};
